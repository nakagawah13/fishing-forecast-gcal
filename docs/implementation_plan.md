# Implementation Plan

## 方針
- まずは天文潮のみで動く MVP を作る
- 予報更新は後続フェーズで拡張
- すべて自動化可能なパイプラインを意識して設計

## フェーズ 0: 仕様確定（短期）
- 対象地点、期間、出力フォーマットの合意
- Google カレンダーのイベント設計（タイトル/本文/タイムゾーン/更新方針）
- 天文潮の取得方式の決定
- タイドグラフ画像の表現方針は後続フェーズで検討
- 開発環境（uv 前提）の手順をドキュメント化

## 決定事項（2026-02-07）
- 天文潮は計算ライブラリ優先（API は比較・代替手段）
- MVP は画像なし
- 設定ファイルはテンプレート運用（実体は Git 管理しない）

## フェーズ 1: MVP（天文潮ベース）
- 潮汐データ取得（計算 or API）
- 満潮・干潮時刻の抽出
- 潮回り付与
- Google カレンダーイベント作成
- 既存イベントを上書き更新できる upsert の PoC

成果物:
- 1か月分の潮汐イベントを生成・登録できる（画像なし）

補足:
- MVP は終日イベントのみ（カレンダー汚染を回避）
- 時刻イベントは別カレンダーに分離する方針
- 時合い帯の既定は「満潮前後 2 時間」

## フェーズ 2: 直前更新（予報）
- 風速・風向など予報 API の接続
- 直前バッチでイベント更新
- 釣行判断の注釈や簡易評価を追加

成果物:
- 1週間前から前日までの更新が反映される

## フェーズ 3: 運用強化
- リトライ、監視、失敗通知
- 差分更新最適化
- 設定ファイルと複数地点対応

## 相談事項（後日詰める）
- 計算ライブラリの精度評価（許容誤差の基準）
- タイドグラフ画像のホスティング方法
- Google カレンダーの画像添付方式
- Google カレンダー API のイベント ID 制約確認
- 公式/準公式データの利用規約と安定性確認
