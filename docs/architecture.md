# Architecture

## 目的
- 潮汐（天文潮）を元に、満潮・干潮時刻と潮回りを Google カレンダーへ登録
- タイドグラフ画像を生成し、カレンダーへ埋め込み
- 直前の予報値（風速など）を自動更新できる仕組みを備える

## 主要コンポーネント
1. Tide Data Provider
   - 天文潮計算または外部 API から潮汐データを取得
2. Tide Graph Renderer
   - タイドグラフ画像を生成（PNG/SVG）
3. Weather Provider
   - 風速・風向・気圧などの予報値を取得
4. Calendar Sync
   - Google カレンダーにイベント作成・更新・画像埋め込み
5. Scheduler
   - 初回一括登録と、直前更新のバッチ実行

## データフロー（概要）
- 天文潮データ取得 → 満干潮時刻・潮回り算出 → グラフ生成
- Google カレンダーイベント作成（画像 URL もしくは添付リンク）
- 直前更新時に風速などを追記してイベント更新

## 更新ポリシー
- 長期登録（数か月〜1年先）: 天文潮のみ
- 直前更新（1週間前〜前日）: 風速・風向など予報値を反映

## 非機能要件（概要）
- API 失敗時のリトライ
- 予報値更新の差分更新
- ログと再実行性
