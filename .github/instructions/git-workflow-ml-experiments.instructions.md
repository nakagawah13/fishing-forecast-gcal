---
applyTo: "**"
---

# Git Workflow Instructions - ML/AI Experiments

ã“ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ã€ML/AIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã‘ã‚‹**å®Ÿé¨“ç®¡ç†ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°**ã«ç‰¹åŒ–ã—ãŸAIå‘ã‘ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²

ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®å†…å®¹ã‚’å«ã¿ã¾ã™:

- **å®Ÿé¨“ç®¡ç†**: Gitã‚¿ã‚°ã«ã‚ˆã‚‹å®Ÿé¨“ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã®è¨˜éŒ²
- **å†ç¾æ€§ç¢ºä¿**: ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã€ä¾å­˜é–¢ä¿‚ã€å®Ÿé¨“è¨­å®šã€ç’°å¢ƒè¨­å®šã®ç®¡ç†
- **å®Ÿé¨“ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ML/AIç‰¹æœ‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹

## é–¢é€£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

- **åŸºæœ¬Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: [git-workflow.instructions.md](./git-workflow.instructions.md)ã§å®šç¾©
- **PRä½œæˆ**: [ai-pull-request.instructions.md](./ai-pull-request.instructions.md)ã§å®šç¾©
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ **: [ai-project-structure-ml.instructions.md](./ai-project-structure-ml.instructions.md)ã§å®šç¾©

---

## å®Ÿé¨“ç®¡ç†ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°

### Gitã‚¿ã‚°ã«ã‚ˆã‚‹å®Ÿé¨“ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã®è¨˜éŒ²

é‡è¦ãªå®Ÿé¨“çµæœã‚„æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã¯ã€**Gitã‚¿ã‚°**ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

#### ã‚¿ã‚°ã®ç¨®é¡

**è»½é‡ã‚¿ã‚°ï¼ˆLightweight Tagï¼‰**:
- å˜ç´”ãªãƒã‚¤ãƒ³ã‚¿
- å®Ÿé¨“ã®ä¸­é–“ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã«ä½¿ç”¨

```bash
# è»½é‡ã‚¿ã‚°ã®ä½œæˆ
git tag exp-v1.2.3
```

**æ³¨é‡ˆä»˜ãã‚¿ã‚°ï¼ˆAnnotated Tagï¼‰**:
- å®Œå…¨ãªGitã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- ä½œæˆè€…ã€æ—¥ä»˜ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å«ã‚€
- **é‡è¦ãªãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã«æ¨å¥¨**

```bash
# æ³¨é‡ˆä»˜ãã‚¿ã‚°ã®ä½œæˆ
git tag -a v1.0.0 -m "Production release: baseline model with 85% accuracy"
git tag -a exp-baseline -m "Baseline experiment: LightGBM with default params"
```

#### ã‚¿ã‚°å‘½åè¦å‰‡

**æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹**:
```
v<major>.<minor>.<patch>
ä¾‹: v1.0.0, v1.2.3, v2.0.0
```

**å®Ÿé¨“ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**:
```
exp-<experiment-name>-v<version>
ä¾‹: exp-baseline-v1, exp-feature-engineering-v2
```

**ãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³**:
```
model-<model-name>-v<version>
ä¾‹: model-lightgbm-v1.2, model-xgboost-v2.0
```

#### ã‚¿ã‚°ä»˜ã‘ã®å®Ÿè·µä¾‹

```bash
# å®Ÿé¨“ãŒæˆåŠŸã—ãŸå ´åˆ
git tag -a exp-baseline-v1 -m "Baseline experiment

Model: LightGBM
Accuracy: 85.2%
Precision: 83.1%
Recall: 87.3%
Dataset: 2025-12-01 to 2025-12-05
Seed: 42"

# ã‚¿ã‚°ã‚’ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin exp-baseline-v1

# ã™ã¹ã¦ã®ã‚¿ã‚°ã‚’ãƒ—ãƒƒã‚·ãƒ¥
git push origin --tags
```

#### ã‚¿ã‚°ã®ç¢ºèª

```bash
# ã™ã¹ã¦ã®ã‚¿ã‚°ã‚’è¡¨ç¤º
git tag

# ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§ã‚¿ã‚°ã‚’æ¤œç´¢
git tag -l "exp-*"
git tag -l "v1.*"

# ã‚¿ã‚°ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
git show exp-baseline-v1
```

#### ã‚¿ã‚°ã®å‰Šé™¤

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¿ã‚°ã‚’å‰Šé™¤
git tag -d exp-test-v1

# ãƒªãƒ¢ãƒ¼ãƒˆã®ã‚¿ã‚°ã‚’å‰Šé™¤
git push origin --delete exp-test-v1
```

---

## å®Ÿé¨“ã®å†ç¾æ€§ç¢ºä¿

ML/AIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€å®Ÿé¨“ã®å†ç¾æ€§ãŒæ¥µã‚ã¦é‡è¦ã§ã™ã€‚ä»¥ä¸‹ã®è¦ç´ ã‚’å¿…ãšè¨˜éŒ²ãƒ»ç®¡ç†ã—ã¦ãã ã•ã„ã€‚

### 1. ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã®å›ºå®š

ã™ã¹ã¦ã®ä¹±æ•°ç”Ÿæˆã§åŒã˜ã‚·ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

**Pythonä¾‹**:
```python
import random
import numpy as np
import lightgbm as lgb

# ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã‚’å›ºå®š
SEED = 42

random.seed(SEED)
np.random.seed(SEED)

# ãƒ¢ãƒ‡ãƒ«è¨“ç·´æ™‚ã«ã‚‚ã‚·ãƒ¼ãƒ‰ã‚’æŒ‡å®š
model = lgb.LGBMClassifier(random_state=SEED)
```

**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ç®¡ç†**:
```json
{
  "experiment": {
    "random_seed": 42,
    "description": "å›ºå®šã‚·ãƒ¼ãƒ‰ã§å†ç¾æ€§ã‚’ç¢ºä¿"
  }
}
```

### 2. ä¾å­˜é–¢ä¿‚ã®æ˜ç¤º

ã™ã¹ã¦ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ˜ç¢ºã«è¨˜éŒ²ã—ã¾ã™ã€‚

**requirements.txtã®ç”Ÿæˆ**:
```bash
# ç¾åœ¨ã®ç’°å¢ƒã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‡ºåŠ›
pip freeze > requirements.txt

# ã¾ãŸã¯ã€ä¸»è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿è¨˜è¼‰ï¼ˆæ¨å¥¨ï¼‰
# requirements.txt
lightgbm==4.0.0
pandas==2.1.0
numpy==1.24.3
scikit-learn==1.3.0
onnx==1.14.0
onnxruntime==1.15.0
```

**pyproject.tomlã§ã®ç®¡ç†**:
```toml
[project]
dependencies = [
    "lightgbm>=4.0.0,<5.0.0",
    "pandas>=2.1.0,<3.0.0",
    "numpy>=1.24.0,<2.0.0",
]
```

### 3. å®Ÿé¨“è¨­å®šã®è¨˜éŒ²

å®Ÿé¨“ã”ã¨ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã™ã€‚

**å®Ÿé¨“è¨­å®šä¾‹ï¼ˆconfig/experiment_baseline.jsonï¼‰**:
```json
{
  "experiment_id": "exp-baseline-v1",
  "model": {
    "type": "lightgbm",
    "params": {
      "n_estimators": 100,
      "learning_rate": 0.1,
      "max_depth": 5,
      "random_state": 42
    }
  },
  "data": {
    "train_start": "2025-12-01",
    "train_end": "2025-12-05",
    "test_split": 0.2
  },
  "features": [
    "temperature",
    "pressure",
    "humidity",
    "lag_1",
    "lag_2"
  ]
}
```

**Gitã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**:
```bash
git add config/experiment_baseline.json
git commit -m "exp: add baseline experiment configuration"
git tag -a exp-baseline-v1 -m "Baseline experiment configuration"
```

### 4. ç’°å¢ƒè¨­å®šã®è¨˜éŒ²

å®Ÿè¡Œç’°å¢ƒã®æƒ…å ±ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

**ç’°å¢ƒæƒ…å ±ã®è¨˜éŒ²ä¾‹**:
```bash
# Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³
python --version > environment.txt

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
pip list >> environment.txt

# ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
uname -a >> environment.txt
```

**Dockerfileï¼ˆã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒï¼‰**:
```dockerfile
FROM python:3.11-slim

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
ENV PYTHONUNBUFFERED=1
ENV RANDOM_SEED=42
```

### å†ç¾æ€§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Ÿé¨“ã‚’å®Ÿæ–½ã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„:

- [ ] ä¹±æ•°ã‚·ãƒ¼ãƒ‰ãŒå›ºå®šã•ã‚Œã¦ã„ã‚‹
- [ ] requirements.txtã¾ãŸã¯pyproject.tomlãŒæœ€æ–°
- [ ] å®Ÿé¨“è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒGitã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ‡ãƒ¼ã‚¿ã®å–å¾—æ–¹æ³•ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œã¦ã„ã‚‹
- [ ] ç’°å¢ƒå¤‰æ•°ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
- [ ] å®Ÿé¨“çµæœãŒãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
- [ ] é‡è¦ãªãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã«Gitã‚¿ã‚°ãŒä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹

---

## å®Ÿé¨“ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

ML/AIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®PRã§ã¯ã€å®Ÿé¨“ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé‡è¦ã§ã™ã€‚

### å®Ÿé¨“ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

**1. å®Ÿé¨“è¨­è¨ˆ**:
- å®Ÿé¨“ã®ç›®çš„ã¨ä»®èª¬ãŒæ˜ç¢ºã‹
- ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨ã®æ¯”è¼ƒãŒé©åˆ‡ã‹
- å®Ÿé¨“å¤‰æ•°ãŒé©åˆ‡ã«åˆ¶å¾¡ã•ã‚Œã¦ã„ã‚‹ã‹

**2. è©•ä¾¡æŒ‡æ¨™**:
- é©åˆ‡ãªè©•ä¾¡æŒ‡æ¨™ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹
- è©•ä¾¡æŒ‡æ¨™ãŒãƒ“ã‚¸ãƒã‚¹ç›®æ¨™ã¨æ•´åˆã—ã¦ã„ã‚‹ã‹
- è¤‡æ•°ã®æŒ‡æ¨™ã§å¤šè§’çš„ã«è©•ä¾¡ã—ã¦ã„ã‚‹ã‹

**3. ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¯”è¼ƒ**:
- æ—¢å­˜ãƒ¢ãƒ‡ãƒ«ã¨ã®æ€§èƒ½æ¯”è¼ƒãŒã‚ã‚‹ã‹
- çµ±è¨ˆçš„æœ‰æ„æ€§ãŒæ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹
- æ”¹å–„å¹…ãŒå®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã‹

**4. çµæœã®å¦¥å½“æ€§**:
- çµæœãŒçµ±è¨ˆçš„ã«æœ‰æ„ã‹
- éå­¦ç¿’ã®å…†å€™ãŒãªã„ã‹ï¼ˆtrain/validationå·®ï¼‰
- å¤–ã‚Œå€¤ã‚„ç•°å¸¸å€¤ã®å½±éŸ¿ã‚’ç¢ºèªã—ã¦ã„ã‚‹ã‹

**5. éå­¦ç¿’ãƒã‚§ãƒƒã‚¯**:
- train/validationã®æ€§èƒ½å·®ã¯é©åˆ‡ã‹
- ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã¯å®‰å®šã—ã¦ã„ã‚‹ã‹
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®æ€§èƒ½ä½ä¸‹ãŒãªã„ã‹

**6. å®Ÿé¨“è¨˜éŒ²**:
- å®Ÿé¨“æ¡ä»¶ã¨çµæœãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹
- å¤±æ•—ã—ãŸå®Ÿé¨“ã‚‚è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹
- è€ƒå¯Ÿã¨æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒæ˜ç¢ºã‹

### å®Ÿé¨“ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

**ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼å‘ã‘**:

```markdown
# å®Ÿé¨“çµæœã®ç¢ºèª
âœ… ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚ˆã‚Š3%ç²¾åº¦å‘ä¸Šã‚’ç¢ºèªã—ã¾ã—ãŸ
ğŸ“Š confusion matrixã‚’è¦‹ã‚‹ã¨ã€false positiveãŒæ¸›å°‘ã—ã¦ã„ã¾ã™
â“ validation accuracyãŒ85%ã§train accuracyãŒ95%ã§ã™ãŒã€éå­¦ç¿’ã®æ‡¸å¿µã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ
```

**PRä½œæˆè€…å‘ã‘**:

å®Ÿé¨“çµæœã‚’å«ã‚€PRã«ã¯ã€ä»¥ä¸‹ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„:

```markdown
## å®Ÿé¨“çµæœ

### ç›®çš„
ä¸è‰¯å“æ¤œå‡ºç²¾åº¦ã®å‘ä¸Š

### å¤‰æ›´å†…å®¹
- ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°: lagç‰¹å¾´é‡ã‚’è¿½åŠ 
- ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°: learning_rate 0.1 â†’ 0.05

### çµæœ
| ãƒ¢ãƒ‡ãƒ« | Accuracy | Precision | Recall | F1 |
|--------|----------|-----------|--------|-----|
| Baseline | 82.3% | 80.1% | 84.2% | 82.1% |
| Improved | 85.5% | 83.4% | 87.8% | 85.5% |

### è€ƒå¯Ÿ
- lagç‰¹å¾´é‡ãŒæ™‚ç³»åˆ—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ‰ãˆã€ç²¾åº¦å‘ä¸Šã«å¯„ä¸
- false positiveãŒæ¸›å°‘ã—ã€å®Ÿé‹ç”¨ã§ã®èª¤å ±ãŒå‰Šæ¸›ã•ã‚Œã‚‹è¦‹è¾¼ã¿
- æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: ã‚ˆã‚Šé•·æœŸã®lagã‚’æ¤œè¨¼

### å†ç¾æ€§
- Seed: 42
- Dataset: 2025-12-01 to 2025-12-05
- Tag: exp-lag-features-v1
```

---

## ã¾ã¨ã‚

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã®å†ç¢ºèª

1. **ã‚¿ã‚°ä»˜ã‘**: é‡è¦ãªå®Ÿé¨“ã«ã¯Gitã‚¿ã‚°ã‚’ä»˜ã‘ã‚‹
2. **å†ç¾æ€§**: ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã€ä¾å­˜é–¢ä¿‚ã€è¨­å®šã‚’å¿…ãšè¨˜éŒ²
3. **å®Ÿé¨“è¨˜éŒ²**: æˆåŠŸãƒ»å¤±æ•—ã«é–¢ã‚ã‚‰ãšè¨˜éŒ²ã‚’æ®‹ã™
4. **ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å®Ÿé¨“è¨­è¨ˆã€çµæœã€å¦¥å½“æ€§ã‚’å¤šè§’çš„ã«ç¢ºèª

### ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```bash
# å®Ÿé¨“ç”¨ã‚¿ã‚°ã®ä½œæˆ
git tag -a exp-baseline-v1 -m "Baseline experiment: accuracy 85%"
git push origin exp-baseline-v1

# å®Ÿé¨“è¨­å®šã®ã‚³ãƒŸãƒƒãƒˆ
git add config/experiment_*.json
git commit -m "exp: add baseline experiment configuration"

# ä¾å­˜é–¢ä¿‚ã®è¨˜éŒ²
pip freeze > requirements.txt
git add requirements.txt
git commit -m "chore: update dependencies for experiment"
```
